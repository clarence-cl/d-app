<!DOCTYPE html><html lang="en"><head>    <meta charset="utf-8">    <meta name="viewport"          content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">    <title>测试结果</title>    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>    <link rel="stylesheet" type="text/css" href="../../../common/fontclass/iconfont.css">    <script src="../../../common/fontclass/iconfont.js"></script>    <script>        document.documentElement.style.fontSize = document.documentElement.clientHeight / 768 * 10 + 'px';    </script>    <link rel="stylesheet" type="text/css" href="../../css/gradingTestStyle/result_testData_frm.css"></head><body id="body" class="body"><!--<div id="exitTestData" class="icon-wrap">--><!--<i class="iconfont font_family icon-btn">&#xe6fe;</i>--><!--</div>--><!--<div id="goShare" class="icon-wrap-right">--><!--<i class="iconfont font_family icon-btn">&#xe6f1;</i>--><!--<span class="share-text">分享</span>--><!--</div>--><header class="header">    <div class="text-wrap">        <span class="desc-desc">我的证书</span>    </div></header><div class="content">    <div class="title"><span class="a">阅</span><span class="b">读</span><span class="c">能</span><span            class="d">力</span><span class="e">证</span><span class="f">书</span></div>    <img class="img" id="userAvatar" src="../../../common/image/girl@3x.png" alt="girlAvatar">    <div class="name" id="userName"></div>    <div class="test-desc-wrap">恭喜你完成阅读能力测试！你的阅读能力超过了全国<span id="percentageSmall"></span>的同龄人。</div>    <div class="test-desc"><span class="span-text">阅读能力等级</span>        <svg class="icon icon-data" aria-hidden="true">            <use xlink:href="#icon-dingjice_dengji_shiheyuedu"></use>        </svg>        <span class="grade" id="levelName"></span>    </div>    <div class="progress">        <span>1</span>        <div class="plan">            <div class="number" id="level"></div>        </div>        <span>24</span>    </div></div><div class="footer-text-wrap">    <div class="footer-text">颁发机构：<span class="footer-desc">嘀嗒伴我读书</span></div>    <div class="footer-text">颁发时间：<span class="footer-desc" id="time"></span></div></div><div class="check-report-wrap">    <div id="exitTestData" class="start-btn">开始选书</div>    <div class="check-report" id="checkReport">        查看        <svg class="icon icon-check" aria-hidden="true">            <use xlink:href="#icon-dingjice_xiangxiacaidan"></use>        </svg>        报告    </div>    <div id="goShare" class="share-btn">炫耀一下</div></div><div class="image-wrap">    <img class="img-badge" src="../../../common/image/badge@3x.png" alt="badge"></div><div id="maskWrap" class="mask-wrap">    <div class="mask">        <div class="icon-mask">            <svg id="maskIcon" class="icon mask-icon" aria-hidden="true">                <use xlink:href="#icon-jiazaijindu2"></use>            </svg>            <div id="maskProgress" class="mask-progress"></div>        </div>        <div class="mask-text">            正在为你定制属于你自己的专属阅读书单        </div>    </div></div></body><link rel="stylesheet" type="text/css" href="../../css/custom-toast.css"><link rel="stylesheet" type="text/css" href="../../css/lib-wechatShare.css"><script type="text/javascript" src="../../../common/script/api.js"></script><script type="text/javascript" src="../../../common/script/custom-toast.js"></script><script type="text/javascript" src="../../../common/script/lib-storage.js"></script><script type="text/javascript" src="../../../common/script/lib-common.js"></script><script type="text/javascript" src="../../../common/script/services/lib-gradeTest-service.js"></script><script type="text/javascript" src="../../../common/script/lib-analysis.js"></script><script type="text/javascript" src="../../../common/script/services/lib-weChatShare-service.js"></script><script type="text/javascript" src="../../../common/script/lib-wechatShare.js"></script><script type="text/javascript">    var toast = new customToast();    var timer = null;    var testResult;    apiready = function () {        adaptationModel();        $api.html($api.byId('time'), $comm.jsDateFormat(new Date(), 'yyyy年MM月dd日'));        loadTestResults();        bindEvent()    };    function bindEvent() {        $analysis.bindEvent($api.byId('checkReport'), 'touchend', function () {            goToResults();        }, '正式测结果页_查看报告b');        $analysis.bindEvent($api.byId('exitTestData'), 'touchend', function () {            loadMaskUI();        }, '正式测结果页_关闭b');        $analysis.bindEvent($api.byId('goShare'), 'touchend', function () {            $weChatShare.shareEntranceCertificate(funShareSuc, funErr)        }, '分享-入学测证书');    }    //用户阅读等级展示    function userLevel(userLevel) {        var level = userLevel.slice(0, userLevel.length - 1);        var Width = 16.6 / 24 * level - 1.5;        $api.css($api.byId('level'), 'left:' + Width + 'rem');        $api.append($api.byId('sutdentLevel'), userLevel + '</div>');        $api.html($api.byId('level'), level);        $api.css($api.byId('readingLever'), 'left:' + Width + 'rem');        $api.append($api.byId('readingGrowSutdentLevel'), userLevel + '</div>');        $api.html($api.byId('readingLever'), level);    }    function funShareSuc(resp) {        if (resp.errCode === 0) {            var params = {                desc: resp.Description,                url: resp.ShareUrl,                shareQrcode: resp.ShareQrcode            };            $wechatShareAlert.show(params, function (type, ret) {                if (ret.status) {                    toast.success({                        title: '分享成功'                    })                } else {                    toast.success({                        title: '分享失败'                    })                }            })        } else {            toast.fail({                title: resp.errMsg            })        }    }    function loadMaskUI() {        if (timer) {            return;        }        $api.css($api.byId('maskWrap'), 'display: flex');        var deg = 0;        var progress = 0;        timer = setInterval(function () {            deg += 10;            progress = progress + 5;            $api.html($api.byId('maskProgress'), progress + '%');            $api.css($api.byId('maskIcon'), 'transform: rotate(' + deg + 'deg)');            if (progress > 100) {                clearInterval(timer);                $api.html($api.byId('maskIcon'), '<use xlink:href="#icon-jiazaijinduwancheng"></use>');                $api.css($api.byId('maskIcon'), 'transform: rotate(0deg)');                $api.html($api.byId('maskProgress'), '');                setTimeout(function () {                    goToBooks()                }, 500)            }        }, 25);    }    function adaptationModel() {        $api.css($api.byId('body'), 'height:' + api.frameHeight + 'px');        $api.css($api.byId('body'), 'width:' + api.frameWidth + 'px');    }    function loadTestResults() {        $GradingTest.entranceTestResults(JSON.parse($storage.getStorage('reading-test-id')).testId, funSucTestResults, funErr)    }    function funSucTestResults(resp) {        if (resp.errCode === 0) {            testResult = resp;            reloadResultUI(resp);        } else {            toast.fail({                title: resp.errMsg            });        }    }    function reloadResultUI(data) {        var userInfo = JSON.parse($storage.getStorage('user-info'));        var userProperties = {            '性别': userInfo.gender,            'vip': userInfo.vip,            '名称': userInfo.userName,            '能力等级': userInfo.gradeScaleName,            '电话号码': JSON.parse($storage.getStorage('user-info')).userMobile        };        if (userInfo.headimgUrl === '') {            $api.attr($api.byId('userAvatar'), 'src', userInfo.gender === 1 ? '../../../common/image/avatar.png' : '../../../common/image/avatar.png');        } else {            $api.attr($api.byId('userAvatar'), 'src', $comm.resUri + userInfo.headimgUrl);        }        $analysis.identify(userInfo.userName, userProperties);        $api.html($api.byId('userName'), userInfo.userName);        $api.html($api.byId('levelName'), userInfo.gradeScaleName);        $api.html($api.byId('percentageSmall'), data.percentage + '%');        userLevel(userInfo.gradeScaleName);    }    function funErr(err) {        toast.fail({            title: '网络异常，请检查网络链接'        });    }    function goToBooks() {        api.openFrame({            name: 'recommended_books_frm',            url: './recommended_books_frm.html',            rect: {                x: 0,                y: 0,                w: 'auto',                h: 'auto'            },            pageParam: {name: 'recommended_books_frm'},            bounces: false,            animation: {                type: "movein",                subType: "from_right",                duration: 300            }        });    }    function goToResults() {        api.openWin({            name: 'index_tabfrm',            url: './test_resultsfrm.html',            pageParam: {name: 'testResults', data: testResult},            bounces: false,            slidBackEnabled: false,            animation: {                type: "push",                subType: "from_bottom",                duration: 300            }        });    }</script></html>